<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Order Receipt</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .receipt-container {
        max-width: 600px;
        margin: 40px auto;
      }

      /* QR styling */
      .qr-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px; /* space between receipt and QR images */
        margin-top: 30px;
      }

      .qr-img {
        width: 33%;
        max-width: 200px;
      }

      @media (max-width: 768px) {
        .qr-img {
          width: 90%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container receipt-container">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h2 class="mb-4">Confirm Your Order</h2>

          <table class="table table-striped text-start">
            <thead>
              <tr>
                <th>Item</th>
                <th class="text-center">Qty</th>
                <th class="text-end">Price</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="item : ${orderSummary.items}">
                <td th:text="${item.name}"></td>
                <td class="text-center" th:text="${item.quantity}"></td>
                <td class="text-end" th:text="'₱' + ${item.price}"></td>
              </tr>
              <tr th:each="addon : ${orderSummary.addons}">
                <td th:text="${addon.name}"></td>
                <td class="text-center" th:text="${addon.quantity}"></td>
                <td class="text-end" th:text="'₱' + ${addon.price}"></td>
              </tr>
            </tbody>
          </table>

          <h4 class="mt-3">
            Total:
            <span class="fw-bold text-success"
              >₱<span th:text="${orderSummary.total}"></span
            ></span>
          </h4>

        <form method="post" th:action="@{/order/submit}" class="mt-4">
            <div th:each="itemId, iterStat : ${orderSummary.itemIds}">
                <input type="hidden" name="itemIds" th:value="${itemId}" />
                <input type="hidden" name="quantities" th:value="${orderSummary.quantities[__${iterStat.index}__]}" />
            </div>

            <div th:each="addonId, iterStat : ${orderSummary.addonIds}">
                <input type="hidden" name="addonIds" th:value="${addonId}" />
                <input type="hidden" name="addonQuantities" th:value="${orderSummary.addonQuantities[__${iterStat.index}__]}" />
            </div>

            <button class="btn btn-success me-2" type="submit">Confirm Order</button>
            <a class="btn btn-secondary" href="/order">Cancel/Edit</a>
        </form>

        </div>
      </div>

      <!-- QR Images Section -->
      <div class="qr-container">
        <img
          th:src="@{/qr-img-1.jpeg}"
          class="d-block mx-auto img-fluid w-33 w-sm-90"
          alt="QR Code 1"
        />
      </div>
      <div class="qr-container">
        <img
          th:src="@{/qr-img-2.jpeg}"
          class="d-block mx-auto img-fluid w-33 w-sm-90"
          alt="QR Code 2"
        />
      </div>
    </div>
  </body>
</html>
